# Interface（インターフェース）とは

## 1. 簡単な説明
- **「このクラスはこういう機能を必ず持っているよ」という契約書**
- メソッドの名前・引数・戻り値の型だけを決め、**中身（処理内容）は書かない**
- 実際の処理は、それを **実装（implements）** したクラスが書く

---

## 2. イメージ例
> 家電の「コンセント規格」のようなもの  
>  
> コンセントの形が同じなら、メーカーが違っても差して使える。  
> インターフェースは「コンセントの形」を決める役割。

---

## 3. 基本構文（PHP例）
```php
interface PaymentProcessorInterface {
    public function processPayment($amount, $details);
    public function validatePayment($details);
}
```
- これを実装するクラスは、必ずこの2つのメソッドを持たなければならない。

```php
class CreditCardProcessor implements PaymentProcessorInterface {
    public function processPayment($amount, $details) {
        // 実際のクレジットカード決済処理
    }
    public function validatePayment($details) {
        // カード番号の検証
    }
}
```

---

## 4. システム開発での利用場面
1. **複数の処理方法を切り替えたいとき**
   - 例：クレジットカード決済、電子マネー決済、銀行振込など
2. **異なる実装でも同じ呼び出し方に統一したいとき**
   - 例：ログ出力を「ファイル」「データベース」「クラウド」に保存するクラスを共通化
3. **後から新しい機能を追加しやすくしたいとき**
   - 例：新しい決済手段を追加しても既存コードを大きく変えずに対応可能

---

## 5. メリット
- **共通のルールで開発できる**
  - チームで開発するとき、メソッド名や引数を統一できる
- **実装の入れ替えが簡単**
  - クラスを差し替えても呼び出し側のコードをほぼ変更せずに動作
- **拡張性が高い**
  - 新しい処理方法を追加するのが容易
- **テストがしやすい**
  - 実際の処理を模した「モッククラス」に置き換えて動作確認できる

---

## 6. 注意点
- インターフェースは**処理の中身を持てない**
- 1つのクラスは**複数のインターフェースを実装可能**
- 「共通ルールを作る必要がない場合」や「1つのクラスしか使わない場合」は不要

---

## 7. インターフェース導入判断チェックリスト
以下の質問に **2つ以上「はい」** があれば、インターフェース導入を検討すると良いです。

- [ ] 同じ機能を異なる方法で実装する可能性があるか？
- [ ] 実装を差し替えても呼び出し側のコードは変えたくないか？
- [ ] チームで開発していて、コードの書き方を統一したいか？
- [ ] 後から新しい機能を追加する可能性が高いか？
- [ ] 単体テストでモックやスタブを使って検証したいか？
- [ ] 外部APIやライブラリとの接続部分を将来差し替える可能性があるか？
